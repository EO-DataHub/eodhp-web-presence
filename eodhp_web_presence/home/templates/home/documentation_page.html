{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags wagtailuserbar %}
{% load static %}

{% block content %}
<div class="generic-page content-page documentation-page">

    <header class="documentation-header">
        <h1>{{ page.title }}</h1>
        {% if page.subtitle %}
        <h2>{{ page.subtitle }}</h2>
        {% endif %}
    </header>

    {% if page.intro %}
    <section class="generic-page__intro">
        <p>{{ page.intro|richtext }}</p>
    </section>
    {% endif %}

    {% if page.topics %}
    <section class="documentation-panels">
        {% for panel in page.topics %}
        <a href='{{ request.build_absolute_uri }}{{ panel.value.slug }}'>
            <button class="documentation-panel">

                <header class="documentation-panel__header">
                    <h2 class="documentation-panel__title">{{ panel.value.title }}</h2>

                    {% if panel.value.image %}
                    {% image panel.value.image fill-100x100 as panel_image %}
                    <div class="documentation-panel__image">
                        <img src="{{ panel_image.url }}" alt="{{ panel.value.title }}">
                    </div>
                    {% endif %}
                </header>

                <div class="documentation-panel__description">
                    {{ panel.value.description|richtext }}
                </div>
            </button>
        </a>
        {% endfor %}
    </section>
    {% endif %}

</div>
{% endblock content %}

{% block wagtailuserbar %}
{% wagtailuserbar %}
{% endblock %}